name: anacostia

services:
  root-pipeline:
    build: ./root-service
    container_name: root-container
    volumes:
      - type: bind
        source: ./root-service/src
        target: /src
      - type: bind
        source: ./root-service/input_artifacts
        target: /input_artifacts
      - type: bind
        source: ./root-service/output_artifacts
        target: /output_artifacts
      - type: bind
        source: ./testing_artifacts
        target: /testing_artifacts
    ports:
      - "8000:8000"
    networks:
      - anacostia-network

  leaf-pipeline:
    build: ./leaf-service
    container_name: leaf-container
    volumes:
      - type: bind
        source: ./leaf-service/src
        target: /src
      - type: bind
        source: ./leaf-service/input_artifacts
        target: /input_artifacts
      - type: bind
        source: ./leaf-service/output_artifacts
        target: /output_artifacts
      - type: bind
        source: ./testing_artifacts
        target: /testing_artifacts
    ports:
      - "8080:8080"
    networks:
      - anacostia-network

networks:
  anacostia-network:
    driver: bridge